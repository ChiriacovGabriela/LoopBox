{% extends 'base.html.twig' %}

{% block title %}PlaylistController!{% endblock %}

{% block body %}

    {% include "partials/nav_bar.html.twig" %}

    <section class="jumbotron text-center">
        <div class="container">

            <h1 class="jumbotron-heading">Playlist {{ playlist.name }}</h1>
            <img src="{{ asset('uploads/images/'~playlist.imageFileName) }}" alt="Sol">

            <p>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
                    Add Song
                </button>

                <a href="{{ path('app_playlist_edit',{id: playlist.id}) }}" class="btn btn-primary my-2">Edit
                    playlist</a>
                <a href="#" class="btn btn-primary my-2">Delete playlist</a>

                {{ include('playlist/_delete_form.html.twig') }}

            <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog"
                 aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">All songs</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">

                            <table class="table">
                                <thead>
                                <tr>
                                    <th scope="col">Title</th>
                                    <th scope="col">Artist</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">action</th>
                                </tr>
                                </thead>

                                <tbody>
                                {% for song in songs %}
                                    {% if song not in playlist.songs %}
                                        <tr>
                                            <td>{{ song.name }}</td>
                                            <td>{{ song.artist }}</td>
                                            <td>{{ song.type }}</td>
                                            <td>
                                                <a href= {{ path('add_song_playlist', {'playlistId': playlist.id, 'songId': song.id}) }}>Add</a>
                                            </td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                                {% if songs|length == playlist.songs|length %}
                                    <tr>
                                        <td colspan="10">no records found</td>
                                    </tr>
                                {% endif %}
                                </tbody>

                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">create</button>
                        </div>
                    </div>
                </div>
            </div>
            </p>
        </div>

    </section>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Titre</th>
            <th scope="col">Artist</th>
            <th scope="col">Album</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% for song in playlist.songs %}
            <tr>
                <th scope="row">{{ song.id }}</th>
                <td>{{ song.name }}</td>
                <td>{{ song.artist }}</td>
                <td>{{ song.type }}</td>
                <td>
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-caret-right" viewBox="0 0 16 16">
                            <path d="M6 12.796V3.204L11.481 8 6 12.796zm.659.753 5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753z"/>
                        </svg>
                    </button>
                    <a href= {{ path('delete_song_playlist', {'playlistId': playlist.id, 'songId': song.id}) }}>delete</a>
                </td>
            </tr>
        {% endfor %}

        </tbody>
    </table>
{% endblock %}
